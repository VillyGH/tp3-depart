(function(e){function t(t){for(var n,s,o=t[0],c=t[1],u=t[2],p=0,m=[];p<o.length;p++)s=o[p],Object.prototype.hasOwnProperty.call(a,s)&&a[s]&&m.push(a[s][0]),a[s]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);l&&l(t);while(m.length)m.shift()();return i.push.apply(i,u||[]),r()}function r(){for(var e,t=0;t<i.length;t++){for(var r=i[t],n=!0,o=1;o<r.length;o++){var c=r[o];0!==a[c]&&(n=!1)}n&&(i.splice(t--,1),e=s(s.s=r[0]))}return e}var n={},a={app:0},i=[];function s(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.m=e,s.c=n,s.d=function(e,t,r){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)s.d(r,n,function(t){return e[t]}.bind(null,n));return r},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var u=0;u<o.length;u++)t(o[u]);var l=c;i.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"45c6":function(e,t,r){"use strict";(function(e){r("063a"),r("e2c0"),r("bcee"),r("e4bd"),r("b900");function n(t){var r=t.split(".")[1],n=e.from(r,"base64");return JSON.parse(n.toString())}function a(e){return n(e).exp}function i(e){return n(e).sub}function s(e){var t=n(e).exp;return!(Date.now()>=1e3*t)}t["a"]={decrypt:n,isAlive:s,getUserId:i,getExpiration:a}}).call(this,r("257d").Buffer)},"56d7":function(e,t,r){"use strict";r.r(t);r("5675"),r("58c3"),r("59f3"),r("3e3e");var n=r("d04a"),a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("NavigationBar"),r("router-view")],1)},i=[],s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("nav",{staticClass:"navbar navbar-expand-md navbar-dark bg-dark"},[r("div",{staticClass:"navbar-nav mr-auto"},[r("router-link",{staticClass:"nav-link",class:{active:"WelcomePage"==e.$route.name},attrs:{to:{name:"WelcomePage"}}},[e._v("Accueil")]),e.isLoggedIn?r("router-link",{staticClass:"nav-link ml-5",class:{active:"Map"==e.$route.name},attrs:{to:{name:"Map"}}},[e._v("Carte")]):e._e()],1),r("div",{staticClass:"navbar-nav ml-auto"},[e.isLoggedIn?r("b-link",{staticClass:"nav-link logout",on:{click:e.logout}},[e._v(" Se déconnecter ")]):r("router-link",{staticClass:"nav-link",class:{active:"Login"==e.$route.name},attrs:{to:{name:"Login"}}},[e._v(" Connexion ")]),e.isLoggedIn?e._e():r("router-link",{staticClass:"nav-link",class:{active:"Register"==e.$route.name},attrs:{to:{name:"Register"}}},[e._v(" Inscription ")])],1)])},o=[],c={computed:{isLoggedIn:function(){return this.$store.getters["authentication/isLoggedIn"]}},methods:{logout:function(){this.$store.dispatch("authentication/logout"),this.$router.push({name:"Login"})}}},u=c,l=r("bdd7"),p=Object(l["a"])(u,s,o,!1,null,null,null),m=p.exports,g={components:{NavigationBar:m}},d=g,f=Object(l["a"])(d,a,i,!1,null,null,null),h=f.exports,v=r("dc3b"),k=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("router-view"),r("p",{staticClass:"ml-5 mt-5"},[e._v("Bienvenue dans mon site !")])],1)},b=[],w={},x=w,T=Object(l["a"])(x,k,b,!1,null,null,null),L=T.exports,y=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"row"},[r("div",{staticClass:"col"},[r("ParkList"),r("TrailList"),r("TrailMap")],1),r("div",{staticClass:"col"},[r("TrailInfos")],1),r("div",{staticClass:"col"},[r("router-view")],1)])])},_=[],E=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"ml-5"},[r("label",{staticClass:"ml-2",attrs:{for:"parkNames"}},[e._v(e._s(e.parksLabel)+" ")]),r("select",{directives:[{name:"model",rawName:"v-model",value:e.firstParkName,expression:"firstParkName"}],staticClass:"mt-2 ml-3 form-select form-select-lg",attrs:{name:"parkNames",id:"parkNames"},on:{change:[function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.firstParkName=t.target.multiple?r:r[0]},function(t){return e.saveId(t)}]}},e._l(e.parks,(function(t){return r("option",{key:t.id,staticClass:"form-option-lg"},[e._v(" "+e._s(t.name)+" ")])})),0),r("div",{staticClass:"error"},[e._v(e._s(e.errorMessage))])])},O=[],P=r("c452"),R=(r("e687"),r("833b"),{parksLabel:"Parcs : ",trailLabel:"Trails : ",parcText:"Parc: ",noTrailsAvailableMessage:"Aucun sentier est disponible pour le moment",likesText:" likes",imageLikeFilledUrl:"https://cdn-icons-png.flaticon.com/128/633/633991.png",imageLikeEmptyUrl:"https://cdn-icons-png.flaticon.com/128/126/126473.png",likeConfirmationMessage:"Merci d’avoir partagé un j’aime pour le tronçons: ",removeLikeConfirmationMessage:"Vous avez retiré un j’aime pour le tronçons: ",mapUrl:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'&copy; <a target="_blank" href="http://osm.org/copyright">OpenStreetMap</a> contributors',zoomValue:13.5,polylineDefaultColor:"green",parksError:"Erreur dans le chargement des parcs",trailsError:"Erreur dans le chargement des sentiers",likesError:"Erreur dans le chargement des likes",segmentsError:"Erreur dans le chargement des tronçons",install:function(e){e.prototype.$getUiText=function(e){return R[e]}}}),S=R,j={name:"ParkList",data:function(){return{parksLabel:S.parksLabel,park:{},firstParkName:"",parks:[],parkServiceError:S.parksError}},created:function(){var e=this;return Object(P["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.initializeParks();case 1:case"end":return t.stop()}}),t)})))()},methods:{initializeParks:function(){var e=this;return Object(P["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("parks/getAllParkAction").then((function(){e.parks=e.$store.getters["parks/getParks"],e.selectedPark=e.parks[0],e.firstParkName=e.selectedPark.name}));case 2:case"end":return t.stop()}}),t)})))()},saveId:function(e){var t=e.target.options.selectedIndex;this.selectedPark=this.parks[t]}},computed:{selectedPark:{get:function(){return this.$store.getters["parks/getSelectedPark"]},set:function(e){this.$store.commit("parks/savePark",e)}},errorMessage:{get:function(){return this.$store.getters["parks/getErrorMessage"]}}}},M=j,C=Object(l["a"])(M,E,O,!1,null,null,null),$=C.exports,I=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"ml-5"},[r("label",{staticClass:"ml-2",attrs:{for:"trailNames"}},[e._v(e._s(e.trailLabel)+" ")]),r("select",{directives:[{name:"model",rawName:"v-model",value:e.firstTrailName,expression:"firstTrailName"}],staticClass:"mt-2 ml-3 form-select form-select-lg",attrs:{name:"trailNames",id:"trailNames"},on:{change:[function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.firstTrailName=t.target.multiple?r:r[0]},function(t){return e.saveId(t)}]}},e._l(e.trails,(function(t){return r("option",{key:t.id,staticClass:"form-option-lg"},[e._v(" "+e._s(t.name)+" ")])})),0),r("p",[e._v(e._s(e.errorMessage))])])},U=[],A={name:"TrailList",data:function(){return{trailLabel:S.trailLabel,trails:[],firstTrailName:{},trailServiceError:S.parksError}},methods:{initiateTrails:function(){var e=this;return Object(P["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("trails/getAllParkTrailsAction",e.selectedPark.id);case 2:""===e.errorMessage&&(e.trails=e.$store.getters["trails/getTrails"],e.firstTrailName=e.trails[0].name,e.selectedTrail=e.trails[0]);case 3:case"end":return t.stop()}}),t)})))()},saveId:function(e){var t=e.target.options.selectedIndex;this.selectedTrail=this.trails[t]}},computed:{selectedPark:{get:function(){return this.$store.getters["parks/getSelectedPark"]}},selectedTrail:{get:function(){return this.$store.getters["trails/getSelectedTrail"]},set:function(e){this.$store.commit("trails/saveTrail",e)}},errorMessage:{get:function(){return this.$store.getters["trails/getErrorMessage"]}}},watch:{selectedPark:{deep:!0,handler:function(e,t){this.initiateTrails()}}}},N=A,z=Object(l["a"])(N,I,U,!1,null,null,null),q=z.exports,B=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"ml-5"},[r("l-map",{staticStyle:{height:"610px",width:"610px"},attrs:{zoom:e.zoom,center:e.center}},[r("l-tile-layer",{attrs:{url:e.url,attribution:e.attribution}}),r("l-polyline",{attrs:{"lat-lngs":e.polyline.latlngs,color:e.polyline.color}})],1)],1)},D=[],W=r("608b"),F=r("e0fd"),G=r("5976"),J={components:{LMap:W["a"],LTileLayer:F["a"],LPolyline:G["a"]},name:"TrailMap",data:function(){return{url:S.mapUrl,attribution:S.attribution,zoom:S.zoomValue,center:[47.31322,-1.319482],polyline:{latlngs:[[47.334852,-1.509485],[47.342596,-1.328731],[47.241487,-1.190568],[47.234787,-1.358337]],color:S.polylineDefaultColor}}},methods:{initiateSegments:function(){var e=this;return Object(P["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("trails/getTrailSegmentsAction",e.selectedTrail.id);case 2:r=e.$store.getters["trails/getTrailSegments"].coordinates,e.polyline.latlngs=r,e.center=e.polyline.latlngs[0];case 5:case"end":return t.stop()}}),t)})))()},saveId:function(e){var t=e.target.options.selectedIndex;this.selectedTrail=this.trails[t]}},computed:{selectedTrail:{get:function(){return this.$store.getters["trails/getSelectedTrail"]}}},watch:{selectedTrail:{deep:!0,handler:function(e,t){this.initiateSegments()}}}},V=J,H=Object(l["a"])(V,B,D,!1,null,null,null),K=H.exports,Q=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"ml-5"},[r("p",{staticClass:"mt-2"},[e._v(e._s(e.selectedTrail.name))]),r("p",[e._v(e._s(e.parkText)+" "+e._s(e.selectedPark.name))]),r("img",{staticStyle:{width:"100px",height:"100px"},attrs:{src:e.imageLikeUrl,alt:"Like the trail image"},on:{click:e.onLikeClick}}),r("p",{staticClass:"ml-4"},[e._v(e._s(e.nbTrailLiked)+" "+e._s(e.likesText))]),r("p",[e._v(e._s(e.confirmationMessage))])])},X=[],Y={name:"TrailInfos",data:function(){return{parkText:S.parcText,likesText:S.likesText}},methods:{initializeTrailInfos:function(){var e=this;return Object(P["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("likes/getTrailLikesAction",e.selectedTrail.id);case 2:case"end":return t.stop()}}),t)})))()},onLikeClick:function(){var e=this;return Object(P["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.isTrailLiked){t.next=5;break}return t.next=3,e.$store.dispatch("likes/likeTrailAction");case 3:t.next=7;break;case 5:return t.next=7,e.$store.dispatch("likes/removeUserLikeAction");case 7:case"end":return t.stop()}}),t)})))()}},computed:{selectedTrail:{get:function(){return this.$store.getters["trails/getSelectedTrail"]}},selectedPark:{get:function(){return this.$store.getters["parks/getSelectedPark"]}},nbTrailLiked:{get:function(){return this.$store.getters["likes/getNbTrailLiked"]}},isTrailLiked:{get:function(){return this.$store.getters["likes/isTrailLiked"]}},imageLikeUrl:{get:function(){return this.$store.getters["likes/getImgLikeUrl"]}},confirmationMessage:{get:function(){return this.$store.getters["likes/getConfirmationMessage"]}}},watch:{selectedTrail:{deep:!0,handler:function(e,t){this.initializeTrailInfos()}}}},Z=Y,ee=Object(l["a"])(Z,Q,X,!1,null,null,null),te=ee.exports,re={components:{ParkList:$,TrailList:q,TrailInfos:te,TrailMap:K}},ne=re,ae=Object(l["a"])(ne,y,_,!1,null,null,null),ie=ae.exports,se=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("b-container",[r("b-form",{on:{submit:function(t){return t.preventDefault(),e.login.apply(null,arguments)}}},[r("h1",[e._v("Connexion")]),r("label",[e._v("Courriel")]),r("b-form-input",{attrs:{required:"",id:"email",type:"text"},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),r("label",[e._v("Mot de passe")]),r("b-form-input",{attrs:{required:"",id:"password",type:"password"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),r("b-button",{staticClass:"mt-4",attrs:{variant:"primary",type:"submit"}},[e._v("Se connecter")])],1),e.authServiceError?r("div",{staticClass:"error"},[e._v(e._s(e.authServiceError))]):e._e()],1)],1)},oe=[],ce={created:function(){this.$store.commit("authentication/clearError")},data:function(){return{email:"",password:""}},methods:{login:function(){var e=this;return Object(P["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("authentication/login",{email:e.email,password:e.password});case 2:e.authServiceError||e.$router.push({name:"WelcomePage"});case 3:case"end":return t.stop()}}),t)})))()}},computed:{authServiceError:function(){return this.$store.state.authentication.authServiceError}}},ue=ce,le=Object(l["a"])(ue,se,oe,!1,null,null,null),pe=le.exports,me=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("b-container",[r("b-form",{on:{submit:function(t){return t.preventDefault(),e.register.apply(null,arguments)}}},[r("h1",[e._v("Créer un compte")]),r("label",[e._v("Courriel")]),r("b-form-input",{attrs:{required:"",type:"text"},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),r("label",[e._v("Nom d'utilisateur")]),r("b-form-input",{attrs:{required:"",type:"text"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),r("label",[e._v("Mot de passe")]),r("b-form-input",{attrs:{required:"",type:"password"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),r("b-button",{staticClass:"mt-4",attrs:{type:"submit",variant:"primary"}},[e._v("Créer le compte")])],1),e.authServiceError?r("div"):e._e()],1)],1)},ge=[],de={created:function(){this.$store.commit("authentication/clearError")},data:function(){return{email:"",name:"",password:""}},methods:{register:function(){var e=this;return Object(P["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("authentication/register",{email:e.email,name:e.name,password:e.password});case 2:e.authServiceError||e.$router.push({name:"Login"});case 3:case"end":return t.stop()}}),t)})))()}},computed:{authServiceError:function(){return this.$store.state.authentication.authServiceError}}},fe=de,he=Object(l["a"])(fe,me,ge,!1,null,null,null),ve=he.exports,ke=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},be=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"content-container"},[r("span",{staticClass:"title"},[e._v("Cette page n'existe pas...")])])}],we={},xe=Object(l["a"])(we,ke,be,!1,null,null,null),Te=xe.exports,Le=[{path:"/",name:"WelcomePage",component:L},{path:"/map",name:"Map",component:ie},{path:"/login",name:"Login",component:pe,meta:{authPage:!0}},{path:"/register",name:"Register",component:ve,meta:{authPage:!0}},{path:"*",name:"PageNotFound",component:Te}],ye=r("6c71"),_e="https://tp3-api.herokuapp.com",Ee=r("8aad"),Oe=r.n(Ee),Pe=r("5a19"),Re=r("5d80"),Se=r("7946"),je=r("a927"),Me=r("e0e0"),Ce=(r("bfa3"),function(e){Object(Se["a"])(r,e);var t=Object(je["a"])(r);function r(e,n,a){var i;return Object(Re["a"])(this,r),i=t.call(this,e),i.message=e,i.codeText=n,i.code=a,i}return Object(Pe["a"])(r)}(Object(Me["a"])(Error)));function $e(e){if(Ie(e)){var t=new Ce("Erreur avec le réseau. Impossible de communiquer avec le serveur.");return t}var r=new Ce(e.response.data,e.response.statusText,e.response.status);return r}function Ie(e){return!!e.isAxiosError&&!e.response}function Ue(e){return Ae.apply(this,arguments)}function Ae(){return Ae=Object(P["a"])(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Oe.a.post("".concat(_e,"/api/login"),{email:t.email,password:t.password});case 3:return r=e.sent,console.log(r),n=r.data.accessToken,e.abrupt("return",n);case 9:throw e.prev=9,e.t0=e["catch"](0),$e(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])}))),Ae.apply(this,arguments)}function Ne(e){return ze.apply(this,arguments)}function ze(){return ze=Object(P["a"])(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Oe.a.post("".concat(_e,"/api/register"),{email:t.email,name:t.name,role:"user",password:t.password});case 3:return r=e.sent,n=r.data.accessToken,e.abrupt("return",n);case 8:throw e.prev=8,e.t0=e["catch"](0),$e(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])}))),ze.apply(this,arguments)}var qe={getToken:Ue,register:Ne},Be=r("45c6"),De={token:"",authServiceError:""},We={isLoggedIn:function(e){return!!e.token},getTokenUserId:function(e){var t=Be["a"].getUserId(e.token);return t}},Fe={clearError:function(e){e.authServiceError=""},initializeAuthentication:function(e,t){e.token=t,e.authServiceError=""},logout:function(e){e.token=""},setAuthServiceError:function(e,t){e.authServiceError=t}},Ge={login:function(e,t){return Object(P["a"])(regeneratorRuntime.mark((function r(){var n,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,r.prev=1,r.next=4,qe.getToken(t);case 4:a=r.sent,n("initializeAuthentication",a),r.next=11;break;case 8:r.prev=8,r.t0=r["catch"](1),n("setAuthServiceError",r.t0.message);case 11:case"end":return r.stop()}}),r,null,[[1,8]])})))()},register:function(e,t){return Object(P["a"])(regeneratorRuntime.mark((function r(){var n,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,r.prev=1,r.next=4,qe.register(t);case 4:a=r.sent,n("initializeAuthentication",a),r.next=11;break;case 8:r.prev=8,r.t0=r["catch"](1),n("setAuthServiceError",r.t0.message);case 11:case"end":return r.stop()}}),r,null,[[1,8]])})))()},logout:function(e){var t=e.commit;t("logout")}},Je={namespaced:!0,state:De,actions:Ge,mutations:Fe,getters:We},Ve=r("f8c1");r("2cba"),r("bcee"),r("351c");function He(){return Ke.apply(this,arguments)}function Ke(){return Ke=Object(P["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Ee["get"]("".concat(_e,"/api/parks"));case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)}))),Ke.apply(this,arguments)}function Qe(e){return Xe.apply(this,arguments)}function Xe(){return Xe=Object(P["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Ee["get"]("".concat(_e,"/api/parks/").concat(t));case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)}))),Xe.apply(this,arguments)}var Ye={getParks:He,getParkById:Qe},Ze={parks:[],selectedPark:{},errorMessage:""},et={getParkById:function(e){return function(t){var r=e.parks.find((function(e){return e.id===t}));return r}},getParks:function(e){return e.parks},getSelectedPark:function(e){return e.selectedPark},getErrorMessage:function(e){return e.errorMessage}},tt={initialiseParks:function(e,t){e.parks=t,e.errorMessage=""},savePark:function(e,t){e.selectedPark=t,e.errorMessage=""},setOnError:function(e,t){e.errorMessage=t}},rt={getAllParkAction:function(e){return Object(P["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.commit,t.prev=1,t.next=4,Ye.getParks();case 4:n=t.sent,r("initialiseParks",n),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](1),r("setOnError",t.t0);case 11:case"end":return t.stop()}}),t,null,[[1,8]])})))()}},nt={namespaced:!0,state:Ze,actions:rt,mutations:tt,getters:et};function at(e){return it.apply(this,arguments)}function it(){return it=Object(P["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Ee["get"]("".concat(_e,"/api/parks/").concat(t,"/trails"));case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)}))),it.apply(this,arguments)}function st(e){return ot.apply(this,arguments)}function ot(){return ot=Object(P["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Ee["get"]("".concat(_e,"/api/trails/").concat(t));case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)}))),ot.apply(this,arguments)}function ct(e){return ut.apply(this,arguments)}function ut(){return ut=Object(P["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Ee["get"]("".concat(_e,"/api/trails/").concat(t,"/likes"));case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)}))),ut.apply(this,arguments)}function lt(e){return pt.apply(this,arguments)}function pt(){return pt=Object(P["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Ee["get"]("".concat(_e,"/api/segments/").concat(t));case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)}))),pt.apply(this,arguments)}var mt={getParkTrails:at,getTrailById:st,getTrailLikes:ct,getTrailSegments:lt},gt={trails:[],selectedTrail:{},selectedPark:{},trailSegments:[],errorMessage:""},dt={getTrails:function(e){return e.trails},getSelectedTrail:function(e){return e.selectedTrail},getTrailSegments:function(e){return e.trailSegments},getErrorMessage:function(e){return e.errorMessage}},ft={initialiseTrails:function(e,t){e.trails=t,0===t.length?e.errorMessage=S.noTrailsAvailableMessage:e.errorMessage=""},saveTrail:function(e,t){e.selectedTrail=t},initialiseSegments:function(e,t){e.trailSegments=t,e.errorMessage=""},setOnError:function(e,t){e.errorMessage=t}},ht={getAllParkTrailsAction:function(e,t){return Object(P["a"])(regeneratorRuntime.mark((function r(){var n,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,r.prev=1,r.next=4,mt.getParkTrails(t);case 4:a=r.sent,n("initialiseTrails",a),r.next=11;break;case 8:r.prev=8,r.t0=r["catch"](1),n("setOnError",r.t0);case 11:case"end":return r.stop()}}),r,null,[[1,8]])})))()},getTrailSegmentsAction:function(e,t){return Object(P["a"])(regeneratorRuntime.mark((function r(){var n,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,r.prev=1,r.next=4,mt.getTrailSegments(t);case 4:a=r.sent,n("initialiseSegments",a),r.next=11;break;case 8:r.prev=8,r.t0=r["catch"](1),n("setOnError",r.t0);case 11:case"end":return r.stop()}}),r,null,[[1,8]])})))()}},vt={namespaced:!0,state:gt,actions:ht,mutations:ft,getters:dt},kt=(r("adc5"),Oe.a.create({}));kt.interceptors.request.use((function(e){return Ct.getters["authentication/isLoggedIn"]&&(e.headers.authorization="Bearer ".concat(Ct.state.authentication.token)),e}));var bt=kt;function wt(e){return xt.apply(this,arguments)}function xt(){return xt=Object(P["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,bt.get("".concat(_e,"/api/users/").concat(t,"/likes/"));case 3:return r=e.sent,e.abrupt("return",r.data);case 7:throw e.prev=7,e.t0=e["catch"](0),$e(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),xt.apply(this,arguments)}function Tt(e,t){return Lt.apply(this,arguments)}function Lt(){return Lt=Object(P["a"])(regeneratorRuntime.mark((function e(t,r){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n={userId:t,trailId:r},e.prev=1,e.next=4,bt.post("".concat(_e,"/api/likes/"),n);case 4:return a=e.sent,e.abrupt("return",a.data);case 8:throw e.prev=8,e.t0=e["catch"](1),$e(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])}))),Lt.apply(this,arguments)}function yt(e){return _t.apply(this,arguments)}function _t(){return _t=Object(P["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,bt.delete("".concat(_e,"/api/likes/").concat(t));case 3:return r=e.sent,e.abrupt("return",r.data);case 7:throw e.prev=7,e.t0=e["catch"](0),$e(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),_t.apply(this,arguments)}var Et={getUserLikes:wt,likeTrail:Tt,removeUserLike:yt},Ot={likes:[],trailName:"",nbTrailLiked:0,isTrailLiked:!1,imgLikeUrl:S.imageLikeEmptyUrl,lastUserLikeId:0,confirmationMessage:"",errorMessage:""},Pt={getLikes:function(e){return e.likes},getNbTrailLiked:function(e){return e.nbTrailLiked},isTrailLiked:function(e){return e.isTrailLiked},getImgLikeUrl:function(e){return e.imgLikeUrl},getLastUserLikeId:function(e){return e.lastUserLikeId},getConfirmationMessage:function(e){return e.confirmationMessage}},Rt={initiateTrailLikes:function(e,t){e.likes=t,e.nbTrailLiked=e.likes.length,e.onError=!1},checkIfTrailLiked:function(e,t){e.isTrailLiked=!1,e.likes.forEach((function(r){r.userId===parseInt(t)&&(e.isTrailLiked=!0,e.imgLikeUrl=S.imageLikeFilledUrl,e.lastUserLikeId=r.id)})),!1===e.isTrailLiked&&(e.imgLikeUrl=S.imageLikeEmptyUrl)},addConfirmationMessage:function(e,t){e.isTrailLiked?e.confirmationMessage=S.removeLikeConfirmationMessage+t:e.confirmationMessage=S.likeConfirmationMessage+t},setOnError:function(e,t){e.onError=t}},St={getTrailLikesAction:function(e,t){return Object(P["a"])(regeneratorRuntime.mark((function r(){var n,a,i,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,a=e.rootGetters,r.prev=1,i=a["authentication/getTokenUserId"],r.next=5,mt.getTrailLikes(t);case 5:s=r.sent,n("initiateTrailLikes",s),n("checkIfTrailLiked",i),r.next=13;break;case 10:r.prev=10,r.t0=r["catch"](1),n("setOnError",r.t0);case 13:case"end":return r.stop()}}),r,null,[[1,10]])})))()},likeTrailAction:function(e){return Object(P["a"])(regeneratorRuntime.mark((function t(){var r,n,a,i,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.commit,n=e.rootGetters,a=e.dispatch,t.prev=1,i=n["trails/getSelectedTrail"],s=parseInt(n["authentication/getTokenUserId"]),t.next=6,Et.likeTrail(s,i.id);case 6:r("addConfirmationMessage",i.name),a("getTrailLikesAction",i.id),t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](1),r("setOnError",t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})))()},removeUserLikeAction:function(e){return Object(P["a"])(regeneratorRuntime.mark((function t(){var r,n,a,i,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.commit,n=e.rootGetters,a=e.getters,i=e.dispatch,t.prev=1,s=n["trails/getSelectedTrail"],t.next=5,Et.removeUserLike(a.getLastUserLikeId);case 5:r("addConfirmationMessage",s.name),i("getTrailLikesAction",s.id),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](1),r("setOnError",t.t0);case 12:case"end":return t.stop()}}),t,null,[[1,9]])})))()}},jt={namespaced:!0,state:Ot,actions:St,mutations:Rt,getters:Pt},Mt=new Ve["a"]({storage:window.sessionStorage,reducer:function(e){return{authentication:{token:e.authentication.token}}}});n["default"].use(ye["a"]);var Ct=new ye["a"].Store({modules:{authentication:Je,parks:nt,trails:vt,likes:jt},plugins:[Mt.plugin]});n["default"].use(v["a"]);var $t=new v["a"]({mode:"history",base:"/",routes:Le});$t.beforeEach((function(e,t,r){e.meta.requiresAuth&&!Ct.getters["authentication/isLoggedIn"]?r({name:"Login",query:{redirect:e.path}}):e.meta.authPage&&Ct.getters["authentication/isLoggedIn"]?r({name:"WelcomePage"}):r()}));var It=$t,Ut=r("d422"),At=r("8472"),Nt=(r("5f3e"),r("41cf"),r("9a6e"),r("9b4d")),zt=r.n(Nt);delete zt.a.Icon.Default.prototype._getIconUrl,zt.a.Icon.Default.mergeOptions({iconRetinaUrl:r("a741"),iconUrl:r("843f"),shadowUrl:r("9021")}),n["default"].use(Ut["a"]),n["default"].use(At["a"]),n["default"].use(S),n["default"].config.productionTip=!1,new n["default"]({router:It,store:Ct,render:function(e){return e(h)}}).$mount("#app")}});
//# sourceMappingURL=app.6d16cd6b.js.map